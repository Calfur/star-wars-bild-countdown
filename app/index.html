<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" type="text/css" href="font/fonts.css">
  <link rel="stylesheet" type="text/css" href="styles.css">

  <link rel="icon" type="image/png" href="favicon.ico">

  <title>StarWars Bild Countdown</title>
</head>
<body>
  <div class="title">
    <h2>Julia's </h2>
    <h1>"Starwars Bild"</h1>
    <h2>Countdown</h2>
  </div>

  <div class="counter-container">
    <p id="counter"></p>
  </div>

  <div id="jedi">
    <img src="img/jedi.png" alt="Jedi easteregg">
    <div>
      <p>May the force be with her</p>
    </div>
  </div>

  <script>
    var finalDate = new Date("Aug 17, 2034 00:00:00");

    var x = setInterval(function() {
      var now = new Date();
      var distance = finalDate - now;

      var years = finalDate.getFullYear() - now.getFullYear();
      var months = finalDate.getMonth() - now.getMonth();
      var days = finalDate.getDate() - now.getDate();

      if (days < 0) {
        months--;
        var lastMonth = new Date(now.getFullYear(), now.getMonth(), 0);
        days += lastMonth.getDate();
      }
      if (months < 0) {
        years--;
        months += 12;
      }

      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);
      var milliseconds = distance % 1000;

      document.getElementById("counter").innerHTML = 
        years + "y " + months + "m " + days + "d " + hours + "h " + minutes + "m " + seconds + "s " + milliseconds + "ms";

      // Show #jedi only from full hour to 5 minutes after a full hour
      var currentMinutes = new Date().getMinutes();
      if (currentMinutes >= 0 && currentMinutes <= 5) {
        document.getElementById("jedi").style.display = "flex";
      } else {
        document.getElementById("jedi").style.display = "none";
      }

      if (distance < 0) {
        clearInterval(x);
        document.getElementById("counter").innerHTML = "EXPIRED";
      }
    }, 10);
  </script>
</body>
</html>